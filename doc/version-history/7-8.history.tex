%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{\label{sec:History-7-8}Stable Release Series 7.8}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

This is a stable release series of Condor.
As usual, only bug fixes (and potentially, ports to new platforms)
will be provided in future 7.8.x releases.
New features will be added in the 7.9.x development series.

The details of each version are described below.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-8-2}Version 7.8.2}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item Condor version 7.8.2 not yet released.
%\item Condor version 7.8.2 released on Month Date, 2012.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item The \File{libcondorapi} library for reading and writing job event
logs is again available as a shared library on Linux and Mac OS platforms.
Since Condor 7.5.x, it had only been available as a static library.
\Ticket{3047}

\end{itemize}

\noindent Configuration Variable and ClassAd Attribute Additions and Changes:

\begin{itemize}

\item To avoid the output of an unnecessary DAGMan error message,
the value of \Macro{DAGMAN\_LOG\_ON\_NFS\_IS\_ERROR}
is ignored when both \MacroNI{CREATE\_LOCKS\_ON\_LOCAL\_DISK}
and \MacroNI{ENABLE\_USERLOG\_LOCKING} are \Expr{True}.
\Ticket{3087}

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item Fixed a bug in which usage of cgroups incorrectly included the
page cache in the maximum memory usage.
This bug fix is also included in Condor version 7.9.0.
\Ticket{3003}

\item Jobs from a hook to fetch work, 
where the hook is defined by configuration variable 
\MacroNI{<Keyword>\_HOOK\_FETCH\_WORK},
now correctly receive dynamic slots from a partitionable slot 
instead of claiming the entire partitionable slot.
\Ticket{2819}

\item Fixed a bug in which a slot might become stuck in the Preempting state
when a \Condor{startd} is configured with a hook to fetch work,
as defined by \Macro{<Keyword>\_HOOK\_FETCH\_WORK}.
\Ticket{3076}

\item Fixed a bug that caused Condor to transfer a job's input files from
the execute machine back to the submit machine as if they were output files.
This would happen if the
job's input files were stored in Condor's spool directory;
occurred if the job was submitted via Condor-C or via 
\Condor{submit} with the \Opt{-spool} or \Opt{-remote} options.
\Ticket{2406}

\item Fixed a bug that could cause the first grid-type cream jobs destined 
for a particular CREAM server to never be submitted to that server.
This bug was probably introduced in Condor version 7.6.5.
\Ticket{3054}

\item Fixed several problems with the XML parsing class
\Code{ClassAdXMLParser} in the ClassAds library:
  \begin{itemize}
  \item Several methods named \Procedure{ParseClassAd} were declared, 
  but never implemented. 
\Ticket{3049}
  \item The parser silently dropped leading white space in string values.
\Ticket{3042}
  \item The parser could go into an infinite loop or leak memory when
    reading a malformed ClassAd XML document. 
\Ticket{3045}
  \end{itemize}

\item Fixed a bug that prevented the \Opt{-f} command line option to
\Condor{history} from being recognized.
The \Opt{-f} option was being interpreted as \Opt{-forward}. 
At least four letters are now required for the \Opt{-forward} option
(\Opt{-forw}) to prevent ambiguity.
\Ticket{3044}

\item The implementation of the \Condor{history} \Opt{-backwards} option, 
which is the default ordering for reading the history file,
in the 7.7 series did not work on Windows platforms.
This has been fixed.
\Ticket{3055}

\item Fixed a bug that caused an invalid proxy to be delegated when
refreshing the job's X.509 proxy when configuration variable
\Macro{DELEGATE\_JOB\_GSI\_CREDENTIALS\_LIFETIME} was set to 0.
\Ticket{3059}

\item Fixed a bug in which DAGMan did not account properly for jobs being
suspended and then unsuspended.
\Ticket{3108}

\item Job IDs generated by NorduGrid ARC 12.05 and above are now
properly recognized.
\Ticket{3062}

\item Fixed a bug in which Condor would not mark grid-type nordugrid jobs
as Running due to variation in the format of the job status value.
NorduGrid ARC job statuses of the form \Expr{INLRMS: ?} are now
properly recognized both with and without the space after the colon.
\Ticket{3118}

\item The \Condor{gridmanager} now properly handles X.509 proxy files
that are specified in the job ClassAd with a relative path name.
\Ticket{3027}

\item Fixed a bug that caused daemon names,
as set in configuration variables such as \MacroNI{STARTD\_NAME},
containing a period character to be ignored.
\Ticket{3172}

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-8-1}Version 7.8.1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item Condor version 7.8.1 released on June 15, 2012.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item None.

\end{itemize}

\noindent Configuration Variable and ClassAd Attribute Additions and Changes:

\begin{itemize}

\item (Added in 7.8.0.) The new configuration variable
\Macro{ENABLE\_DEPRECATION\_WARNINGS} causes \Condor{submit} to issue
warnings when a job requests features that are no longer supported.
\Ticket{2968}

\item (Added in 7.7.6) The new configuration variable
\Macro{BATCH\_GAHP} should be used instead of \Macro{PBS\_GAHP},
\Macro{LSF\_GAHP} and \Macro{SGE\_GAHP}. These older configuration
variables are still recognized, but their use is now discouraged.
\Ticket{2670}

\item The default value for \Macro{GROUP\_SORT\_EXPR} was changed 
so that the \Expr{<none>} group would always negotiate last 
when using hierarchical group quotas.
Associated with that, 
the default value for \Macro{NEGOTIATOR\_ALLOW\_QUOTA\_OVERSUBSCRIPTION} 
was changed to \Expr{True}.  
These changes were made to make negotiation behave more like it did 
in the stable 7.4 series of Condor,
before hierarchical group quotas were added.
\Ticket{3040}

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item Fixed a bug that caused events to not be written to the job event
log when the log is written in XML and a job policy expression triggering
the event contains any double quote marks.
\Ticket{3048}

\item Fixed a bug in the Condor init script that would cause
the init script to hang if Condor was not running.
\Ticket{2872}

\item Fixed a bug that caused parallel universe jobs using
Parallel Scheduling Groups 
(see section ~\ref{sec:Configure-Dedicated-Groups})
to occasionally stay idle even when
there were available machines to run them.
\Ticket{3017}

\item Fixed a bug that caused the \Condor{gridmanager} to crash when
attempting to submit jobs to a local PBS, LSF, or SGI cluster.
\Ticket{3014}

\item Fixed a bug in the handling of local universe jobs which caused
the \Condor{schedd} to log a spurious \Expr{ERROR} message
every time a local universe job exited, 
and then further caused the statistics for local universe jobs to be 
incorrectly computed.
\Ticket{3008}

\item Changed the internally used \Condor{ckpt\_probe} executable
to link statically, which should make the
checkpoint signature more resistant to non-significant changes in the system
configuration.
\Ticket{2901}

\item Restored Globus and VOMS support for the Mac OS X platform.
\Ticket{2991}

\item Fixed a bug when Condor runs under the PrivSep model,
in which if a job created a hard link from one file to another,
Condor was unable to transfer the files back to the submit side,
and the job was put on hold.
\Ticket{2987}

\item When configuration variables \MacroNI{MaxJobRetirementTime} or
\MacroNI{MachineMaxVacateTime} were very large, estimates of machine
draining badput and completion time were sometimes nonsensical
because of integer overflow.
\Ticket{3001}

\item Fixed a bug where per-job subdirectories and their contents
in \MacroUNI{SPOOL} would not be removed when the associated job
left the queue.
\Ticket{2942}

\item Fixed a bug that could cause the \Condor{schedd} to 
occasionally crash due to a race condition when running local universe jobs.
Associated with the bug would be the error message
\footnotesize
\begin{verbatim}
No local universe jobs were expected to be running, but one just exited!
\end{verbatim}
\normalsize
\Ticket{3009}

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item Submit description file commands introduced in Condor version 7.7.1
have now been documented.
See the \Condor{submit} manual page at ~\ref{man-condor-submit} for
the newly added definitions of
\begin{description}
  \item[\SubmitCmd{ec2\_availability\_zone}]
  \item[\SubmitCmd{ec2\_ebs\_volumes}]
  \item[\SubmitCmd{ec2\_elastic\_ip}]
  \item[\SubmitCmd{ec2\_keypair\_file}]
  \item[\SubmitCmd{ec2\_vpc\_ip}]
  \item[\SubmitCmd{ec2\_vpc\_subnet}]
\end{description}

\item There is now a manual page for \Condor{router\_rm}, 
a script that provides additional features convenient for removing
jobs managed by the Condor Job Router.

\item Documentation not completed for the 7.7.6 release is now available.
The use of configuration variable \MacroNI{BATCH\_GAHP},
as well as the use of the new \SubmitCmd{grid\_resource} of
type \Expr{batch} for local submission of PBS, LSF, and SGE
jobs is documented.
See section ~\ref{sec:batch} for details.
\Ticket{2670}

\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-8-0}Version 7.8.0}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item Condor version 7.8.0 released on May 10, 2012.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item (Added in 7.7.6.)  The new \Arg{-\_condor\_relocatable} argument
may be given as part of the invocation of a program that uses
standalone checkpointing.  This allows checkpointed programs to restart
without attempting to change to their original directory.
\Ticket{2877}

\item (Added in 7.7.5.) Added the \Arg{-absent} flag to \Condor{status},
which displays absent ClassAds.
\Ticket{2690}

\item (Added in 7.7.5.) Implement absent ads, which help track pool membership
in a persistent way.
\Ticket{2608} 

\end{itemize}

\noindent Configuration Variable and ClassAd Attribute Additions and Changes:

\begin{itemize}

\item The job ClassAd attribute \Attr{RemotePool} is now saved in
  \Attr{LastRemotePool} when the job finishes running.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item (Fixed in 7.7.6.) Fix \Arg{-absent}, \Arg{-vm}, and \Arg{-java}
flags to \Condor{status} so that they work with the \Arg{-long} option.
\Ticket{2943}

\item Support glob() on Scientific Linux 6 and others using the new
Linux system call fstatat(), but only when not using remote system calls.
\Ticket{2945}

\item Fixed potential startd crash introduced in v7.7.5 when claiming 
a partitionable slot that was in the Owner state. 
\Ticket{2936}

\item When ClassAd function stringListMember() is called with an empty
string as the second argument, it now evaluates to \Expr{False}.
Previously, it incorrectly evaluated to \Expr{Undefined}.
\Ticket{2953}

\item Format tags \%v and \%V for the \Opt{-format} option now properly
print all ClassAd value types. Previously, \Expr{True} and \Expr{False}
were printed as integers, and new ClassAd types like lists and nested
ClassAds could not be printed.
\Ticket{2960}

\item Restored RCS keyword strings CondorVersion and CondorPlatform to
the Condor binaries. These strings are found and printed by the 
\Opt{ident} program on Unix. They were missing in Condor versions 7.7.3
and later.
\Ticket{2932}

\item \Condor{job\_router} failed to route spooled source jobs.
\Ticket{2955}

\item Fixed a bug on Debian 6 and RHEL 6 that could cause standard
universe jobs to never checkpoint. This would happen if the job
triggered a call to NSCD (Name Service Caching Daemon) but NSCD 
wasn't running. 
Calls to NSCD can be triggered by a look up of a user account or
resolving a machine hostname to an IP address.
Now, NSCD is never consulted by a standard universe
job (this was already the behavior on other platforms).
\Ticket{2973}

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}


